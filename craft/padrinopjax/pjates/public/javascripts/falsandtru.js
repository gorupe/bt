/*
 * 
 * pjax
 * 
 * ---
 * @Copyright(c) 2012, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 1.32.9
 * @updated 2014/04/22
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(m,l,y,v){function C(a,e,h,p,c,b){var f=this;switch(!0){case "object"===typeof b:f=f instanceof a?f:a(h);f=c.setProperties.call(f,b.ns||"",null);if(!b.area&&!b.scope)return f;break;default:return f=f instanceof a?f:a[c.name],c.setProperties.call(f,null,null)}var d;d=a.extend(!0,{id:0,gns:c.name,ns:null,area:null,link:"a:not([target])",filter:function(){return/(\/[^.]*|\.html?|\.php)([#?].*)?$/.test(this.href)},form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{dataType:"text"},
contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,mix:!1,page:100,size:1048576,expires:{max:null,min:3E5}},callback:function(){},callbacks:{ajax:{},update:{url:{},title:{},content:{},scroll:{},css:{},script:{},cache:{load:{},save:{}},rendering:{},verify:{}},async:!1},parameter:null,load:{css:!1,script:!1,execute:!0,reload:"",reject:"",sync:!0,ajax:{dataType:"script"},rewrite:null},interval:300,wait:0,scroll:{delay:300},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,
fallback:!0,database:!0,server:{query:"pjax=1"}},b);d.location=a("<a/>",{href:c.canonicalizeURL(e.location.href)})[0];d.destination=a("<a/>",{href:c.canonicalizeURL(e.location.href)})[0];d.nss={array:[c.name].concat(d.ns&&String(d.ns).split(".")||[])};a.extend(!0,d=d.scope&&c.scope(d)||d,{nss:{name:d.ns||"",event:d.nss.array.join("."),alias:c.alias?[c.alias].concat(d.nss.array.slice(1)).join("."):!1,click:["click"].concat(d.nss.array.join(":")).join("."),submit:["submit"].concat(d.nss.array.join(":")).join("."),
popstate:["popstate"].concat(d.nss.array.join(":")).join("."),scroll:["scroll"].concat(d.nss.array.join(":")).join("."),data:d.nss.array.join("-"),class4html:d.nss.array.join("-"),requestHeader:["X",d.nss.array[0].replace(/^\w/,function(d){return d.toUpperCase()})].join("-")},areaback:d.area,fix:/Mobile(\/\w+)? Safari/i.test(e.navigator.userAgent)?{}:{location:!1,reset:!1},contentType:d.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),scroll:{record:!0,queue:[]},log:{script:{},speed:{}},history:{order:[],
data:{},size:0},timeStamp:(new Date).getTime(),disable:!1,landing:c.canonicalizeURL(e.location.href),retry:!0,xhr:null,speed:{now:function(){return(new Date).getTime()}},option:b});c.supportPushState()&&c.registrate.call(f,a,e,h,p,c,d);return f}var k;k={name:"pjax",alias:"",ids:[],settings:[0],count:0,setAlias:function(a){k.alias="string"===typeof a?a:k.alias;k.name===k.alias||m[k.alias]||(m[k.name][k.alias]=m.fn[k.name],m.fn[k.alias]=m[k.alias]=m.fn[k.name])},IDBFactory:l.indexedDB||l.webkitIndexedDB||
l.mozIndexedDB||l.msIndexedDB,IDBDatabase:null,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange||l.mozIDBKeyRange||l.msIDBKeyRange,createHTMLDocument:null,setProperties:function(a,e){var h=this;if(h instanceof m||h===m[k.name])h=h instanceof m&&e!==v?h.add(e):h,h[k.name]=m[k.name],h.on=function(){k.settings[1].disable=!1},h.off=function(){k.settings[1].disable=!0},h.click=function(a,c){var b;switch(!0){case "object"===typeof a:b=m(a);break;case !!a:c=c||{};c.href=a;b=m("<a/>",c);break;default:return this}return b.first().one("click",
1,k.click).click()},h.submit=function(a,c,b){var f=y.createDocumentFragment(),d;switch(!0){case "object"===typeof a:c=m(a);break;case !!b:c=c||{};c.action=a;a=b instanceof Array&&Array||b instanceof Object&&Object||v;for(var e in b){d=b[e];switch(a){case Object:d=m("<textarea/>",{name:e}).val(d);break;case Array:d.attr=d.attr||{};d.attr.name=d.name;d=m(d.tag.indexOf("<")?"<"+d.tag+"/>":d.tag,d.attr||{}).val(d.value);break;default:continue}f.appendChild(d[0])}c=m("<form/>",c).append(f);break;default:return this}return c.first().one("submit",
1,k.submit).submit()},h.setCache=function(a,c,b,f){var d=k.settings[1];if(!d||!d.history)return this;var e,h,u,z;e=d.history;a=k.canonicalizeURL(a||l.location.href);a=d.hashquery?a:a.replace(/#.*/,"");switch(arguments.length){case 0:case 1:return arguments.callee.call(this,a,k.trim(y.documentElement.outerHTML));default:e.order.unshift(a);for(h=1;u=e.order[h];h++)a===u&&e.order.splice(h,1);e.size>d.cache.size&&m[k.name].cleanCache();m[k.name].getCache(a);h=m("<span/>").html(k.find((c||"")+((f||{}).responseText||
"")+"<title></title>",/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text();u=parseInt(1.8*((c||"").length+((f||{}).responseText||"").length)||1048576,10);z=(new Date).getTime();var t;if(t=d.cache.expires){var r;/no-store|no-cache/.test(f.getResponseHeader("Cache-Control"))||(r=~String(r=f.getResponseHeader("Cache-Control")).indexOf("max-age=")?1E3*r.match(/max-age=(\d+)/)[1]:(r=f.getResponseHeader("Expires"))?(new Date(r)).getTime()-(new Date).getTime():d.cache.expires);r=Math.max(r,0)||0;r="object"===
typeof d.cache.expires&&"number"===typeof d.cache.expires.min?Math.max(d.cache.expires.min,r):r;r="object"===typeof d.cache.expires&&"number"===typeof d.cache.expires.max?Math.min(d.cache.expires.max,r):r;t=z+r}e.size=e.size||0;e.size+=e.data[a]?0:u;e.data[a]=m.extend(!0,e.data[a]||{},{XMLHttpRequest:f,textStatus:b,data:c,size:u,expires:t||0,timeStamp:z});d.database&&d.fix.history&&k.dbTitle(a,h)}return this},h.getCache=function(a){var c=k.settings[1];if(!c||!c.history)return!1;var b;b=c.history;
a=k.canonicalizeURL(a||l.location.href);a=c.hashquery?a:a.replace(/#.*/,"");b.data[a]&&(new Date).getTime()>b.data[a].expires&&m[k.name].removeCache(a);return b.data[a]},h.removeCache=function(a){var c=k.settings[1];if(!c||!c.history)return this;var b;b=c.history;a=k.canonicalizeURL(a||l.location.href);a=c.hashquery?a:a.replace(/#.*/,"");for(var c=0,f;f=b.order[c];c++)a===f&&(b.order.splice(c,1),b.size-=b.data[f].size,b.data[f]=null,delete b.data[f]);return this},h.clearCache=function(){var a=k.settings[1];
if(!a||!a.history)return this;for(var a=a.history,c=a.order.length,b;b=a.order[--c];)a.order.splice(c,1),a.size-=a.data[b].size,delete a.data[b];return this},h.cleanCache=function(){var a=k.settings[1];if(!a||!a.history)return this;for(var c=a.history,b=c.order.length,f;f=c.order[--b];)if(b>=a.cache.page||f in c.data&&(new Date).getTime()>c.data[f].expires)c.order.splice(b,1),c.size-=c.data[f].size,delete c.data[f];return this},h.follow=function(a,c,b){var f=k.settings[1];if(!f||!m.when||!k.check(a,
f))return!1;isFinite(a.timeStamp)&&(c.timeStamp=b||a.timeStamp);f.xhr=c;m.when(c).done(function(){f.xhr&&4>f.xhr.readyState&&f.xhr.abort();m[k.name].setCache(a.currentTarget.href,v,v,c)}).fail(function(){k.fallback(a)});m[k.name].click(a.currentTarget.href);return!0};return h},check:function(a,e){var h,p;h=m("<a/>",{href:k.canonicalizeURL(l.location.href)})[0];p=m("<a/>",{href:k.canonicalizeURL(a.currentTarget.href)})[0];if(m(a.currentTarget).filter(e.filter).length&&!(e.disable||h.protocol!==p.protocol||
h.host!==p.host||1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)&&(e.area=k.fire(e.areaback,null,[a,e.parameter,p.href,h.href]),m(e.area).length&&(!e.scope||k.scope(e,h.href,p.href))))return!0},supportPushState:function(){return"pushState"in l.history&&l.history.pushState},registrate:function(a,e,h,k,c,b){b.id=1;c.ids.push(b.id);c.settings[b.id]=b;b.load.script&&a("script").each(function(){var f=this,d,f="function"===typeof b.load.rewrite?c.fire(b.load.rewrite,null,[f.cloneNode()])||f:f;(d=
f.src)&&d in b.log.script||!d||b.load.reload&&a(f).is(b.load.reload)||(b.log.script[d]=!0)});b.database&&(c.database(),b.fix.scroll&&a(e).unbind(b.nss.scroll).bind(b.nss.scroll,b.id,function(b,d){var h=c.settings[1],k;if(h.scroll.delay){for(;k=h.scroll.queue.shift();)clearTimeout(k);k=setTimeout(function(){for(;k=h.scroll.queue.shift();)clearTimeout(k);c.dbScroll(a(e).scrollLeft(),a(e).scrollTop())},h.scroll.delay);h.scroll.queue.push(k)}else c.dbScroll(a(e).scrollLeft(),a(e).scrollTop())}));b.link&&
a(this).undelegate(b.link,b.nss.click).delegate(b.link,b.nss.click,b.id,c.click=function(b){b.timeStamp=(new Date).getTime();var d=c.settings[1];if(!(!a(this).filter(d.filter).length||d.disable||b.isDefaultPrevented()||(d.location.href=c.canonicalizeURL(e.location.href),d.destination.href=c.canonicalizeURL(this.href),d.location.protocol!==d.destination.protocol||d.location.host!==d.destination.host||1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey||!d.hashquery&&d.destination.hash&&d.location.href.replace(/#.*/,
"")===d.destination.href.replace(/#.*/,"")))){var m,n;m=d.destination.href;d.area=c.fire(d.areaback,null,[b,d.parameter,d.destination.href,d.location.href]);d.timeStamp=b.timeStamp;d.landing&&(d.landing=!1);if(!(d.cache.mix&&a[c.name].getCache(m)||!a(d.area).length||d.scope&&!c.scope(d)))return d.database&&c.dbScroll(a(e).scrollLeft(),a(e).scrollTop()),d.cache[b.type.toLowerCase()]&&(n=a[c.name].getCache(m)),c.drive(a,e,h,k,c,d,b,m,!0,n),b.preventDefault()}});b.form&&a(this).undelegate(b.form,b.nss.submit).delegate(b.form,
b.nss.submit,b.id,c.submit=function(b){b.timeStamp=(new Date).getTime();var d=c.settings[1];if(!(d.disable||b.isDefaultPrevented()||(d.location.href=c.canonicalizeURL(e.location.href),d.destination.href=c.canonicalizeURL(this.action),d.location.protocol!==d.destination.protocol||d.location.host!==d.destination.host||1<b.which||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey))){var m,n;m=d.destination.href=c.canonicalizeURL(d.destination.href.replace(/[?#].*/,"")+("GET"===b.target.method.toUpperCase()?
"?"+a(b.target).serialize():""));d.area=c.fire(d.areaback,null,[b,d.parameter,d.destination.href,d.location.href]);d.timeStamp=b.timeStamp;d.landing&&(d.landing=!1);if(!(d.cache.mix&&a[c.name].getCache(m)||!a(d.area).length||d.scope&&!c.scope(d)))return d.database&&c.dbScroll(a(e).scrollLeft(),a(e).scrollTop()),d.cache[b.type.toLowerCase()]&&d.cache[b.target.method.toLowerCase()]&&(n=a[c.name].getCache(m)),c.drive(a,e,h,k,c,d,b,m,!0,n),b.preventDefault()}});a(e).unbind(b.nss.popstate).bind(b.nss.popstate,
b.id,c.popstate=function(b){b.timeStamp=(new Date).getTime();var d=c.settings[1];if(!d.disable&&!b.isDefaultPrevented()){d.destination.href=c.canonicalizeURL(e.location.href);if(d.location.href===d.destination.href)return b.preventDefault();var m,n;if(d.location.hash!==d.destination.hash&&d.location.pathname+d.location.search===d.destination.pathname+d.destination.search&&!d.hashquery)return b.preventDefault();m=d.destination.href;d.area=c.fire(d.areaback,null,[b,d.parameter,d.destination.href,d.location.href]);
d.timeStamp=b.timeStamp;if(d.landing){if(d.landing.href===m){d.landing=!1;return}d.landing=!1}if(a(d.area).length)return d.database&&d.fix.history&&c.dbTitle(m),d.cache[b.type.toLowerCase()]&&(n=a[c.name].getCache(m)),c.drive(a,e,h,k,c,d,b,m,!1,n),b.preventDefault()}});setTimeout(function(){function b(d){try{var c=d&&d('<html lang="en" class="html a b"><noscript><style></style></noscript><body><noscript>noscript</noscript></body></html>');return c&&a("html",c).is(".html[lang=en]")&&a("head>noscript",
c).html()&&"noscript"===a("body>noscript",c).text()}catch(e){}}c.createHTMLDocument=function(a){return e.DOMParser&&e.DOMParser.prototype&&(new e.DOMParser).parseFromString(a,"text/html")};b(c.createHTMLDocument)||(c.createHTMLDocument=function(a){if(h.implementation&&h.implementation.createHTMLDocument){for(var b=h.implementation.createHTMLDocument(""),c=(a.slice(0,1024).match(/.*<html ([^>]+)>/im)||[0,""])[1].match(/\w+\="[^"]*.|\w+\='[^']*.|\w+/gm)||[],e=-1,f;f=c[++e];)f=f.split("=",2),b.documentElement.setAttribute(f[0],
f[1].replace(/^["']|["']$/g,""));b.documentElement.innerHTML=a}return b},b(c.createHTMLDocument)||(c.createHTMLDocument=!1))},50)},drive:function(a,e,h,k,c,b,f,d,m,n){function u(a,b,c,e,f,g,h,k){a:{var n=g.callbacks.update;if(!1!==f.fire(n.before,null,[h,g.parameter,r,s,q,k],g.callbacks.async)){if(g.cache.mix&&"popstate"!==h.type.toLowerCase()&&(new Date).getTime()-h.timeStamp<g.cache.mix)return"function"===typeof g.fallback?f.fire(g.fallback,null,[h,g.parameter,g.destination.href,g.location.href]):
f.fallback(h);var p,l,u;try{g.xhr&&4>g.xhr.readyState&&g.xhr.abort();g.xhr=null;if(!k&&!~(q.getResponseHeader("Content-Type")||"").toLowerCase().search(g.contentType))throw Error("throw: content-type mismatch");k&&!1!==f.fire(n.cache.load.before,null,[h,g.parameter,k],g.callbacks.async)&&(q=k.XMLHttpRequest||q,r=q.responseText,s=k.textStatus||s,l=k.css,u=k.script,f.fire(n.cache.load.after,null,[h,g.parameter,k],g.callbacks.async));var x,t,w,v,A,z,D;z=g.area.split(/\s*,\s*/);t=(q.responseText||"").replace(/<noscript[^>]*>(?:.|[\n\r])*?<\/noscript>/gim,
function(a){return a.replace(/<script(?:.|[\n\r])*?<\/script>/gim,"")});if(k&&k.data){v=k.data;w=a(f.createHTMLDocument&&v&&f.createHTMLDocument(v)||v);t=t.replace(/<title[^>]*?>([^<]*?)<\/title>/i,function(a){return f.find(v,/(<title[^>]*?>[^<]*?<\/title>)/i).shift()||a});x=a(f.createHTMLDocument&&t&&f.createHTMLDocument(t)||t);for(var y=0,B,M,J;B=z[y++];){M=x.find(B).add(x.filter(B)).empty()[0];J=w.find(B).add(w.filter(B)).contents();for(var C=0;F=J[C++];)M.appendChild(F)}}else x=a(f.createHTMLDocument&&
t&&f.createHTMLDocument(t)||t);switch(!0){case !!x.find("html")[0]:A=1;x.find("noscript").each(function(){this.children.length&&a(this).text(this.innerHTML)});break;case !!x.filter("title")[0]:A=0;break;default:A=!1}switch(A){case 1:p=x.find("title").text();break;case 0:p=x.filter("title").text();break;case !1:p=a("<span/>").html(f.find(t,/<title[^>]*?>([^<]*?)<\/title>/i).shift()).text()}if(!a(g.area).length||!x.find(g.area).add(A?"":x.filter(g.area)).length)throw Error("throw: area length mismatch");
a(b).trigger(g.gns+".unload");!1!==f.fire(n.url.before,null,[h,g.parameter,r,s,q],g.callbacks.async)&&(m&&d!==g.location.href&&b.history.pushState(f.fire(g.state,null,[h,g.parameter,g.destination.href,g.location.href]),b.opera||~b.navigator.userAgent.toLowerCase().indexOf("opera")?p:c.title,d),g.location.href=d,m&&g.fix.location&&(a[f.name].off(),b.history.back(),b.history.forward(),a[f.name].on()),f.fire(n.url.after,null,[h,g.parameter,r,s,q],g.callbacks.async));!1!==f.fire(n.title.before,null,[h,
g.parameter,r,s,q],g.callbacks.async)&&(c.title=p,g.database&&g.fix.history&&f.dbTitle(d,p),f.fire(n.title.after,null,[h,g.parameter,r,s,q],g.callbacks.async));g.database&&f.dbCurrent();if(!1!==f.fire(n.content.before,null,[h,g.parameter,r,s,q],g.callbacks.async)){a(g.area).children("."+g.nss.class4html+"-check").remove();D=a("<div/>",{"class":g.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(g.gns);
for(var y=0,F;B=z[y++];)F=x.find(B).add(A?"":x.filter(B)).clone().find("script").remove().end().contents(),a(B).html(F).append(D.clone());D=a(g.area).children("."+g.nss.class4html+"-check");a(c).trigger(g.gns+".DOMContentLoaded");f.fire(n.content.after,null,[h,g.parameter,r,s,q],g.callbacks.async)}var K=function(d){if(!1!==f.fire(n.scroll.before,null,[h,g.parameter],g.callbacks.async)){var c,e;switch(h.type.toLowerCase()){case "click":case "submit":c=d&&"function"===typeof g.scrollLeft?f.fire(g.scrollLeft,
null,[h,g.parameter,g.destination.href,g.location.href]):g.scrollLeft;c=0<=c?c:0;c=!1===c||null===c?a(b).scrollLeft():parseInt(Number(c),10);e=d&&"function"===typeof g.scrollTop?f.fire(g.scrollTop,null,[h,g.parameter,g.destination.href,g.location.href]):g.scrollTop;e=0<=e?e:0;e=!1===e||null===e?a(b).scrollTop():parseInt(Number(e),10);a(b).scrollTop()===e&&a(b).scrollLeft()===c||b.scrollTo(c,e);d&&g.database&&g.fix.scroll&&f.dbScroll(c,e);break;case "popstate":d&&g.database&&g.fix.scroll&&f.dbScroll()}f.fire(n.scroll.after,
null,[h,g.parameter],g.callbacks.async)}};k&&k.XMLHttpRequest||!g.cache.click&&!g.cache.submit&&!g.cache.popstate||"submit"===h.type.toLowerCase()&&!g.cache[h.target.method.toLowerCase()]||!1===f.fire(n.cache.save.before,null,[h,g.parameter,k],g.callbacks.async)||(a[f.name].setCache(d,v||null,s,q),k=a[f.name].getCache(d),f.fire(n.cache.save.after,null,[h,g.parameter,k],g.callbacks.async));var L=function(b){if(!1!==f.fire(n.rendering.before,null,[h,g.parameter],g.callbacks.async)){var c=0;(function(){D.filter(function(){return this.clientWidth||
this.clientHeight||a(this).is(":hidden")}).length===D.length||100<=c?N(b):D.length&&(c++,setTimeout(arguments.callee,g.interval))})()}},N=function(c){D.remove();g.scroll.record=!0;f.hashscroll("popstate"===h.type.toLowerCase())||K(!0);a(b).trigger(g.gns+".load");f.fire(c);f.fire(n.rendering.after,null,[h,g.parameter],g.callbacks.async)};switch(A){case 1:case 0:x.find("noscript").remove();break;case !1:t=t.replace(/^(?:.|[\n\r])*<body[^>]*>.*[\n\r]*.*[\n\r]*/im,function(a){return a.replace(/\x3c!--\[(?:.|[\n\r])*?<!\[endif\]--\x3e/gim,
"")}),t=t.replace(/<noscript(?:.|[\n\r])*?<\/noscript>/gim,"")}var H=function(c){if(g.load.script&&!1!==f.fire(n.script.before,null,[h,g.parameter,r,s,q],g.callbacks.async)){var e;e=(k=a[f.name].getCache(d))&&!k.script;switch(u||A){case 1:case 0:u=x.find("script").add(A?"":x.filter("script")).clone().get();break;case !1:u=f.find(t,/(?:[^\'\"]|^\s*?)(<script[^>]*?>(?:.|[\n\r])*?<\/script>)(?:[^\'\"]|\s*?$)/gim)}u=a(u).not(g.load.reject);k&&k.script&&u&&u.length!==k.script.length&&(e=!0);e&&(k.script=
[]);for(var m=0,l,p;l=u[m];m++)if(l="object"===typeof l?e?a(l.outerHTML)[0]:l:a(l)[0],l="function"===typeof g.load.rewrite?f.fire(g.load.rewrite,null,[l.cloneNode()])||l:l,e&&(k.script[m]=l),a(l).is(c)&&(p=f.trim(l.src||""),!(p&&p in g.log.script||g.load.reject&&a(l).is(g.load.reject)))){!p||g.load.reload&&a(l).is(g.load.reload)||(g.log.script[p]=!0);try{p?a.ajax(a.extend(!0,{},g.ajax,g.load.ajax,{url:l.src,async:!!l.async,global:!1})):"object"!==typeof l||l.type&&!~l.type.toLowerCase().indexOf("text/javascript")||
b.eval.call(b,(l.text||l.textContent||l.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))}catch(w){break}}f.fire(n.script.after,null,[h,g.parameter,r,s,q],g.callbacks.async)}};if(!1!==f.fire(n.verify.before,null,[h,g.parameter],g.callbacks.async)){if(d===f.canonicalizeURL(b.location.href))g.retry=!0;else if(g.retry)g.retry=!1,f.drive(a,b,c,e,f,g,h,b.location.href,!1,g.cache[h.type.toLowerCase()]&&a[f.name].getCache(f.canonicalizeURL(b.location.href)));else throw Error("throw: location mismatch");
f.fire(n.verify.after,null,[h,g.parameter],g.callbacks.async)}(function(){if(g.load.css&&!1!==f.fire(n.css.before,null,[h,g.parameter,r,s,q],g.callbacks.async)){var b,c=[],e=a('link[rel~="stylesheet"], style');b=(k=a[f.name].getCache(d))&&!k.css;switch(l||A){case 1:case 0:l=x.find('link[rel~="stylesheet"], style').add(A?"":x.filter('link[rel~="stylesheet"], style')).clone().get();break;case !1:l=f.find(t,/(<link[^>]*?rel=.[^"\']*?stylesheet[^>]*?>|<style[^>]*?>(?:.|[\n\r])*?<\/style>)/gim)}l=a(l).not(g.load.reject);
k&&k.css&&l&&l.length!==k.css.length&&(b=!0);b&&(k.css=[]);for(var m=0,p,u;p=l[m];m++){p="object"===typeof p?b?a(p.outerHTML)[0]:p:a(p)[0];p="function"===typeof g.load.rewrite?f.fire(g.load.rewrite,null,[p.cloneNode()])||p:p;b&&(k.css[m]=p);u=f.trim(p.href||p.innerHTML||"");for(var w=0,v;v=e[w];w++)if(!c.length&&f.trim(v.href||v.innerHTML||"")===u){e=e.not(v);p=null;break}else if(!w&&c.length)break;p&&c.push(p)}e.not(g.load.reload).remove();a("head").append(c);f.fire(n.css.after,null,[h,g.parameter,
r,s,q],g.callbacks.async)}})();a(b).one(g.gns+".rendering",function(b){b.preventDefault();b.stopImmediatePropagation();K(!1);a(c).trigger(g.gns+".ready");H(":not([defer]), :not([src])");g.load.sync?L(function(){H("[src][defer]")}):(L(),H("[src][defer]"))}).trigger(g.gns+".rendering");if(!1===f.fire(n.success,null,[h,g.parameter,r,s,q],g.callbacks.async))break a;if(!1===f.fire(n.complete,null,[h,g.parameter,r,s,q],g.callbacks.async))break a;if(!1===f.fire(g.callback,null,[h,g.parameter,r,s,q],g.callbacks.async))break a}catch(O){k&&
a[f.name].removeCache(d);if(!1===f.fire(n.error,null,[h,g.parameter,r,s,q],g.callbacks.async))break a;if(!1===f.fire(n.complete,null,[h,g.parameter,r,s,q],g.callbacks.async))break a;if(g.fallback)return"function"===typeof g.fallback?f.fire(g.fallback,null,[h,g.parameter,g.destination.href,g.location.href]):f.fallback(h)}f.fire(n.after,null,[h,g.parameter,r,s,q],g.callbacks.async)}}}b.scroll.record=!1;b.fix.reset&&/click|submit/.test(f.type.toLowerCase())&&e.scrollTo(a(e).scrollLeft(),0);if(!1!==c.fire(b.callbacks.before,
null,[f,b.parameter],b.callbacks.async)){a[c.name].off();if(n&&n.XMLHttpRequest)a.when?a.when(c.wait(c.fire(b.wait,null,[f,b.parameter,b.destination.href,b.location.href]))).done(function(){u(a,e,h,k,c,b,f,n)}):u(a,e,h,k,c,b,f,n);else if(b.xhr&&b.xhr.promise){var l=b.wait&&isFinite(b.xhr.timeStamp)?Math.max(b.wait-(new Date).getTime()+b.xhr.timeStamp,0):0;a.when(b.xhr,c.wait(l)).done(function(){u(a,e,h,k,c,b,f,a[c.name].getCache(d))})}else{var t,r,q,s,v,l={};switch(f.type.toLowerCase()){case "click":l.type=
"GET";break;case "submit":l.type=f.target.method.toUpperCase();"POST"===l.type&&(l.data=a(f.target).serializeArray());break;case "popstate":l.type="GET"}t=a.when?a.Deferred():null;a.extend(!0,l,b.ajax,{xhr:b.callbacks.ajax.xhr?function(){q=c.fire(b.callbacks.ajax.xhr,this,[f,b.parameter],b.callbacks.async);return q="object"===typeof q&&q||a.ajaxSettings.xhr()}:k,beforeSend:function(a,d){q=a;b.xhr&&4>b.xhr.readyState&&b.xhr.abort();b.xhr=q;q.setRequestHeader(b.nss.requestHeader,"true");q.setRequestHeader(b.nss.requestHeader+
"-Area",b.area);q.setRequestHeader(b.nss.requestHeader+"-CSS",b.load.css);q.setRequestHeader(b.nss.requestHeader+"-Script",b.load.script);c.fire(b.callbacks.ajax.beforeSend,this,[f,b.parameter,q,d],b.callbacks.async)},dataFilter:b.callbacks.ajax.dataFilter?function(a,d){r=a;return c.fire(b.callbacks.ajax.dataFilter,this,[f,b.parameter,r,d],b.callbacks.async)||r}:k,success:function(a,d,e){r=a;s=d;q=e;c.fire(b.callbacks.ajax.success,this,[f,b.parameter,r,s,q],b.callbacks.async)},error:function(a,d,
e){q=a;s=d;v=e;c.fire(b.callbacks.ajax.error,this,[f,b.parameter,q,s,v],b.callbacks.async)},complete:function(d,m){q=d;s=m;c.fire(b.callbacks.ajax.complete,this,[f,b.parameter,q,s],b.callbacks.async);if(v){if(t&&t.reject(),b.fallback&&"abort"!==s)return"function"===typeof b.fallback?c.fire(b.fallback,null,[f,b.parameter,b.destination.href,b.location.href]):c.fallback(f)}else t&&t.resolve()||u(a,e,h,k,c,b,f,n)}});var w=b.server.query;w&&(w=w.split("="),w=encodeURIComponent(w[0])+(0<w.length?"="+encodeURIComponent(w[1]):
""));l.url=d.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(w?(d.match(/\?/)?"&":"?")+w:"")+"$2");a.when&&a.when(t.promise(),c.wait(c.fire(b.wait,null,[f,b.parameter,b.destination.href,b.location.href]))).done(function(){u(a,e,h,k,c,b,f,n)});a.ajax(l)}a[c.name].on();c.fire(b.callbacks.after,null,[f,b.parameter],b.callbacks.async)}},canonicalizeURL:function(a){var e;e=k.trim(a);e=e.replace(/[<>"{}|\\^\[\]`\s].*/,"");e=/^https?:/i.test(e)?e:m("<a/>",{href:e})[0].href;e=encodeURI(decodeURI(e));return e=e.replace(/(?:%\w{2})+/g,
function(e){return a.match(e.toLowerCase())||e})},trim:function(a){if(String.prototype.trim)a=String(a).trim();else if(a=String(a).replace(/^\s+/,""))for(var e=a.length;--e;)if(/\S/.test(a.charAt(e))){a=a.substring(0,e+1);break}return a},fire:function(a,e,h,k){return"function"===typeof a?k?setTimeout(function(){a.apply(e,h)},0):a.apply(e,h):a},hashscroll:function(a){var e=k.settings[1].destination.hash.slice(1);return!(a||!e)&&m("#"+(e?e:", [name~="+e+"]")).first().each(function(){isFinite(m(this).offset().top)&&
l.scrollTo(m(l).scrollLeft(),parseInt(Number(m(this).offset().top),10))}).length},wait:function(a){var e=m.Deferred();if(!a)return e.resolve();setTimeout(function(){e.resolve()},a);return e.promise()},fallback:function(a){switch(a.type.toLowerCase()){case "click":l.location.href=a.currentTarget.href;break;case "submit":a.target.submit();break;case "popstate":l.location.reload()}},find:function(a,e){var h=[];a.replace(e,function(a,c){h.push(c)});return h},scope:function(a,e,h,l){var c,b,f,d,E,n,u,
z,t,r,q,s,y;c=[].slice.call(arguments);c.splice(1,1,e||a.location.href);c.splice(2,1,h||a.destination.href);b=a.scope;e=(e||a.location.href).replace(/.+?\w(\/[^#?]*).*/,"$1");h=(h||a.destination.href).replace(/.+?\w(\/[^#?]*).*/,"$1");f=e.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");E=(l||e).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/");if(l){if(!~l.indexOf("*"))return v;d=[];for(var w=0,C=E.length;w<C;w++)"*"===E[w]&&d.push(f[w])}for(w=E.length+1;w--;)if(t=r=q=s=v,f=E.slice(0,w).join("/").replace(/\/([?#])/g,
"$1"),(f="/"+f+("/"===(l||e).charAt(f.length+1)?"/":""))&&f in b){if(!b[f]||!b[f].length)return!1;for(var I=0;(n=b[f][I])&&!1!==q&&!1!==s;I++)if("rewrite"!==n||"function"!==typeof b.rewrite||l)if("inherit"===n)r=!0;else if("string"===typeof n){n=(u="^"===n.charAt(0))?n.slice(1):n;n=(z="*"===n.charAt(0))?n.slice(1):n;if(l&&~n.indexOf("/*/"))for(var G=0,C=d.length;G<C;G++)n=n.replace("/*/","/"+d[G]+"/");if(!(!u&&q||(z?e.search(n):e.indexOf(n)))){if(u)return!1;q=!0}if(!(!u&&s||(z?h.search(n):h.indexOf(n)))){if(u)return!1;
s=!0}}else"object"===typeof n&&(y=n);else if(c.push(k.fire(b.rewrite,null,[h])),t=arguments.callee.apply(this,c)){q=s=!0;break}else if(!1===t)return!1;if(q&&s)return m.extend(!0,{},a,("object"===typeof t?t:y)||{});if(!r)break}},database:function(a){var e=k.settings[1],h,p,c,b,f,d;h=e.gns;p=1;c=Math.floor((new Date).getTime()/864E5);b=k.IDBFactory;f=k.IDBDatabase;a=a||0;e.database=!1;if(!b||!h||5<a)return!1;try{var v=function(c){k.IDBDatabase=null;f&&f.close&&f.close();b.deleteDatabase(h);c?setTimeout(function(){k.database(++a)},
c):k.database(++a)};p=parseInt(c-c%7+p,10);f=b.open(h);f.onblocked=function(){};f.onupgradeneeded=function(){var a=this.result;try{for(var b=a.objectStoreNames?a.objectStoreNames.length:0;b--;)a.deleteObjectStore(a.objectStoreNames[b]);a.createObjectStore(e.gns,{keyPath:"id",autoIncrement:!1}).createIndex("date","date",{unique:!1})}catch(c){}};f.onsuccess=function(){try{f=this.result,k.IDBDatabase=f,(d=k.dbStore())?d.get("_version").onsuccess=function(){this.result&&p!==this.result.title?v():(k.dbVersion(p),
k.dbCurrent(),k.dbTitle(e.location.href,y.title),k.dbScroll(m(l).scrollLeft(),m(l).scrollTop()),e.database=!0)}:v()}catch(a){v(1E3)}};f.onerror=function(a){v(1E3)}}catch(n){v(1E3)}},dbStore:function(){for(var a=k.settings[1],e=k.IDBDatabase,h=e&&e.objectStoreNames?e.objectStoreNames.length:0;h--;)if(a.gns===e.objectStoreNames[h])return e&&e.transaction&&e.transaction(a.gns,"readwrite").objectStore(a.gns);return!1},dbCurrent:function(){var a=k.settings[1],e=k.dbStore();if(e){var h;h=k.canonicalizeURL(l.location.href);
h=a.hashquery?h:h.replace(/#.*/,"");e.put({id:"_current",title:h})}},dbVersion:function(a){var e=k.dbStore();e&&e.put({id:"_version",title:a})},dbTitle:function(a,e){var h=k.settings[1],l=k.dbStore();l&&(a=h.hashquery?a:a.replace(/#.*/,""),e?l.get(a).onsuccess=function(){l.put(m.extend(!0,{},this.result||{},{id:a,title:e,date:(new Date).getTime()}));k.dbClean()}:l.get(a).onsuccess=function(){this.result&&this.result.title&&(y.title=this.result.title)})},dbScroll:function(a,e){var h=k.settings[1],
p=k.dbStore(),c=h.location.href,b=arguments.length;h.scroll.record&&p&&(c=h.hashquery?c:c.replace(/#.*/,""),p.get("_current").onsuccess=function(){this.result&&this.result.title&&c===this.result.title&&(b?p.get(c).onsuccess=function(){p.put(m.extend(!0,{},this.result||{},{scrollX:parseInt(Number(a),10),scrollY:parseInt(Number(e),10)}))}:p.get(c).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&l.scrollTo(parseInt(Number(this.result.scrollX),10),parseInt(Number(this.result.scrollY),
10))})})},dbClean:function(){var a=k.dbStore();a.count().onsuccess=function(){1E3<this.result&&(a.index("date").openCursor(k.IDBKeyRange.upperBound((new Date).getTime()-2592E5)).onsuccess=function(){var e=this.result;e?(e["delete"](e.value.id),e["continue"]()):a.count().onsuccess=function(){1E3<this.result&&a.clear()}})}}};(function(a,e,h,k,c){a.fn[c.name]=a[c.name]=function(){return C.apply(this,[a,e,h,k,c].concat([].slice.call(arguments)))};c.setProperties.call(a[c.name])}).apply(this,[].slice.call(arguments).concat([k]))})(jQuery,
window,document,void 0);
